{% extends 'base.html' %}

{% block content %}
<h2>{{ book.title }}</h2>
<p><strong>Author:</strong> {{ book.author }}</p>
<p><strong>Category:</strong> {{ book.category }}</p>
<p><strong>Description:</strong> {{ book.description }}</p>

<p><strong>Available Copies:</strong> {{ available_copies }} / {{ total_copies }}</p>

{% if user.is_authenticated %}
  {% if available_copies > 0 %}
    <form method="post" action="{% url 'borrow_book' book.id %}">
      {% csrf_token %}
      <button type="submit">Borrow a Copy</button>
    </form>
  {% else %}
    <form method="post" action="{% url 'reserve_book' book.id %}">
      {% csrf_token %}
      <button type="submit">Reserve</button>
    </form>
  {% endif %}
{% else %}
  <p><a href="{% url 'login' %}">Log in</a> to borrow or reserve this book.</p>
{% endif %}
{% endblock %}
